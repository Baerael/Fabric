{"ast":null,"code":"import axios from 'axios';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { loginReducer } from './loginReducer';\nconst API_URL = \"http://localhost:8080/api\";\nconst user = useSelector(state => state.auth.username);\nconst dispatch = useDispatch();\nexport const login = async (username, password) => {\n  console.log('inside actions:', username, password);\n\n  try {\n    const res = await axios.post(`${API_URL}/login`, {\n      username: username,\n      password: password\n    }); // dispatch(login(res.data))\n\n    console.log(res); // localStorage.setItem('token', res.headers.authorization)\n  } catch (error) {\n    return new Error({\n      error: error.message,\n      reason: 'user doesnt exist'\n    });\n  }\n};\nexport const logout = async (username, password) => {\n  try {\n    const res = await axios.post(`${API_URL}/login`, {\n      username: username,\n      password: password\n    });\n    localStorage.logout('token', res.headers.authorization);\n  } catch (error) {\n    // handle error\n    console.error(error);\n    return error;\n  }\n};","map":{"version":3,"sources":["/Users/adhe/fabric/client/src/actions.js"],"names":["axios","useSelector","useDispatch","loginReducer","API_URL","user","state","auth","username","dispatch","login","password","console","log","res","post","error","Error","message","reason","logout","localStorage","headers","authorization"],"mappings":"AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAASC,WAAT,EAAsBC,WAAtB,QAAyC,aAAzC;AACA,SAASC,YAAT,QAA+B,gBAA/B;AAEA,MAAMC,OAAO,GAAG,2BAAhB;AAEA,MAAMC,IAAI,GAAOJ,WAAW,CAAEK,KAAD,IAAWA,KAAK,CAACC,IAAN,CAAWC,QAAvB,CAA5B;AACA,MAAMC,QAAQ,GAAGP,WAAW,EAA5B;AAEA,OAAO,MAAMQ,KAAK,GAAG,OAAOF,QAAP,EAAiBG,QAAjB,KAA8B;AACjDC,EAAAA,OAAO,CAACC,GAAR,CAAY,iBAAZ,EAA+BL,QAA/B,EAAyCG,QAAzC;;AACD,MAAI;AACF,UAAMG,GAAG,GAAG,MAAMd,KAAK,CAACe,IAAN,CAAY,GAAEX,OAAQ,QAAtB,EAA+B;AAC/CI,MAAAA,QAAQ,EAAEA,QADqC;AAE/CG,MAAAA,QAAQ,EAAEA;AAFqC,KAA/B,CAAlB,CADE,CAKD;;AAEAC,IAAAA,OAAO,CAACC,GAAR,CAAYC,GAAZ,EAPC,CASF;AACD,GAVD,CAUE,OAAOE,KAAP,EAAc;AACb,WAAO,IAAIC,KAAJ,CAAU;AACdD,MAAAA,KAAK,EAAEA,KAAK,CAACE,OADC;AACQC,MAAAA,MAAM,EAAE;AADhB,KAAV,CAAP;AAGF;AACD,CAjBM;AAmBP,OAAO,MAAMC,MAAM,GAAG,OAAOZ,QAAP,EAAiBG,QAAjB,KAA8B;AACnD,MAAI;AACF,UAAMG,GAAG,GAAG,MAAMd,KAAK,CAACe,IAAN,CAAY,GAAEX,OAAQ,QAAtB,EAA+B;AAC/CI,MAAAA,QAAQ,EAAEA,QADqC;AAE/CG,MAAAA,QAAQ,EAAEA;AAFqC,KAA/B,CAAlB;AAKAU,IAAAA,YAAY,CAACD,MAAb,CAAoB,OAApB,EAA6BN,GAAG,CAACQ,OAAJ,CAAYC,aAAzC;AACD,GAPD,CAOE,OAAOP,KAAP,EAAc;AACd;AACAJ,IAAAA,OAAO,CAACI,KAAR,CAAcA,KAAd;AACC,WAAOA,KAAP;AACF;AACD,CAbM","sourcesContent":["import axios from 'axios'\nimport { useSelector, useDispatch } from 'react-redux'\nimport { loginReducer,  } from './loginReducer'\n\nconst API_URL = \"http://localhost:8080/api\"\n\nconst user     = useSelector((state) => state.auth.username)\nconst dispatch = useDispatch()\n\nexport const login = async (username, password) => {\n  console.log('inside actions:', username, password)\n\ttry { \n\t  const res = await axios.post(`${API_URL}/login`, {\n\t    username: username,\n\t    password: password\n\t  })\n    // dispatch(login(res.data))\n\n    console.log(res)\n    \n\t  // localStorage.setItem('token', res.headers.authorization)\n\t} catch (error) {\n    return new Error({\n       error: error.message, reason: 'user doesnt exist'\n    })\n\t}\n}\n\nexport const logout = async (username, password) => {\n\ttry { \n\t  const res = await axios.post(`${API_URL}/login`, {\n\t    username: username,\n\t    password: password\n\t  })\n    \n\t  localStorage.logout('token', res.headers.authorization)\n\t} catch (error) {\n\t  // handle error\n\t  console.error(error)\n    return error\n\t}\n}"]},"metadata":{},"sourceType":"module"}